schemaVersion: "2.0.0"

metadataTest:
  labels:
    - key: 'org.label-schema.build-date'
      value: '.*'
      isRegex: true
    - key: 'org.label-schema.vcs-ref'
      value: '.*'
      isRegex: true  
    - key: 'org.label-schema.version'
      value: '.*'
      isRegex: true    
  exposedPorts: []
  volumes: []
  entrypoint: ["dockerd-entrypoint.sh"]
  cmd: []
  workdir: ""

fileExistenceTests:
- name: 'container-structure-test'
  path: '/bin/container-structure-test'
  shouldExist: true
  permissions: '-rwxr-xr-x'
  uid: 0
  gid: 0
  isExecutableBy: 'group'
- name: 'docker-credential-gcr'
  path: '/bin/docker-credential-gcr'
  shouldExist: true
  permissions: '-rwxr-xr-x'
  uid: 0
  gid: 0
  isExecutableBy: 'group'

commandTests:
  - name: "git is functional"
    command: "git"
    args: ["--version"]
    expectedOutput: ["git version .*"]
  - name: "make is functional"
    command: "make"
    args: ["-v"]
    expectedOutput: ["GNU Make .*"]
  - name: "bash is functional"
    command: "bash"
    args: ["--version"]
    expectedOutput: ["GNU bash,.*"]
  - name: "bats is functional"
    command: "bats"
    args: ["-v"]
    expectedOutput: ["Bats .*"]
  - name: "container-structure-test is functional"
    command: "container-structure-test"
    args: ["version"]
    expectedOutput: ["v.*"]